(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7104:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(157).A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},7900:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>T});var r=a(5155),l=a(2115),n=a(6695),i=a(285),c=a(286),t=a(6603),d=a(7104),o=a(1920);let h=(0,a(157).A)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var x=a(3920),m=a(594),p=a(1554),u=a(7648),j=a(9243),f=a(6222),g=a(4165),v=a(2523),N=a(5057),y=a(7481),b=a(2100);function k(e){let{isOpen:s,onOpenChange:a}=e,{checkIn:n}=(0,j.h)(),{user:t}=(0,b.A)(),[d,o]=(0,l.useState)(1),{toast:h}=(0,y.dj)();return(0,r.jsx)(g.lG,{open:s,onOpenChange:a,children:(0,r.jsxs)(g.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(g.c7,{children:[(0,r.jsx)(g.L3,{className:"font-headline",children:"Check In"}),(0,r.jsx)(g.rr,{children:"Enter the number of people in your group."})]}),(0,r.jsx)("div",{className:"grid gap-4 py-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(N.J,{htmlFor:"people",className:"text-right",children:"People"}),(0,r.jsx)(v.p,{id:"people",type:"number",value:d,onChange:e=>o(parseInt(e.target.value,10)||1),className:"col-span-3",min:"1"})]})}),(0,r.jsx)(g.Es,{children:(0,r.jsxs)(i.$,{onClick:()=>{d>0&&t?(n(d,t.username),h({title:"Check-in successful!",description:"You have checked in ".concat(d," ").concat(d>1?"people":"person",".")}),a(!1),o(1)):h({title:"Invalid number",description:"Please enter a number greater than 0.",variant:"destructive"})},children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4"})," Confirm Check-in"]})})]})})}var C=a(9434);let w=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,r.jsx)("textarea",{className:(0,C.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});function A(e){let{isOpen:s,onOpenChange:a}=e,{reserve:n}=(0,j.h)(),{user:c}=(0,b.A)(),{toast:t}=(0,y.dj)(),[d,h]=(0,l.useState)(""),[x,m]=(0,l.useState)(""),[p,u]=(0,l.useState)("");return(0,r.jsx)(g.lG,{open:s,onOpenChange:a,children:(0,r.jsxs)(g.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(g.c7,{children:[(0,r.jsx)(g.L3,{className:"font-headline",children:"Reserve Local"}),(0,r.jsx)(g.rr,{children:"Fill in the details to reserve the entire association local."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,r.jsx)(N.J,{htmlFor:"reason",children:"Reason for Reservation"}),(0,r.jsx)(w,{id:"reason",placeholder:"e.g., Study Group Session, Committee Meeting",value:d,onChange:e=>h(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,r.jsx)(N.J,{htmlFor:"contactPhone",children:"Contact Phone"}),(0,r.jsx)(v.p,{id:"contactPhone",type:"tel",placeholder:"Your phone number",value:x,onChange:e=>m(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,r.jsx)(N.J,{htmlFor:"endTime",children:"Estimated End Time"}),(0,r.jsx)(v.p,{id:"endTime",type:"time",value:p,onChange:e=>u(e.target.value)})]})]}),(0,r.jsx)(g.Es,{children:(0,r.jsxs)(i.$,{onClick:()=>{if(!d||!x||!p)return void t({title:"Missing information",description:"Please fill out all fields to make a reservation.",variant:"destructive"});c&&(n({reason:d,contactPhone:x,endTime:p},c.username),t({title:"Reservation successful!",description:"The local has been reserved."}),a(!1),h(""),m(""),u(""))},children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"})," Confirm Reservation"]})})]})})}w.displayName="Textarea";var R=a(3013),E=a(10);function T(){let{count:e,checkIns:s,reservation:a,checkOutSingle:g,checkOutGroup:v,endReservation:N,isClient:y}=(0,j.h)(),{user:C}=(0,b.A)(),[w,T]=(0,l.useState)(!1),[P,Z]=(0,l.useState)(!1),O=a?"reserved":e>0?"occupied":"empty",S=C?s.find(e=>e.user===C.username):null,B={empty:{text:"Association is empty",color:"green",icon:(0,r.jsx)(c.A,{className:"h-6 w-6 text-green-500"})},occupied:{text:"Association has people",color:"orange",icon:(0,r.jsx)(c.A,{className:"h-6 w-6 text-orange-500"})},reserved:{text:"Association is reserved",color:"red",icon:(0,r.jsx)(t.A,{className:"h-6 w-6 text-red-500"})}}[O],M=e=>{C&&v(e.id,C.username)};return y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"container mx-auto p-4 md:p-8",children:(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,r.jsxs)(n.Zp,{className:"lg:col-span-1",children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium font-headline",children:"Current Status"}),B.icon]}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(f.V,{status:O}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xl md:text-2xl font-bold",children:B.text}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Real-time occupancy indicator"})]})]})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium font-headline",children:"People Inside"}),(0,r.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:a?"N/A":e}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total people currently in the local"})]})]}),(0,r.jsxs)(n.Zp,{className:"md:col-span-2 lg:col-span-1",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{className:"font-headline",children:"Actions"}),(0,r.jsx)(n.BT,{children:"Check-in, check-out or reserve the local."})]}),(0,r.jsxs)(n.Wu,{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)(i.$,{onClick:()=>T(!0),disabled:!!a||!C||!!S,children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"})," Check In"]}),(0,r.jsxs)(i.$,{variant:"secondary",className:"col-span-1",onClick:()=>Z(!0),disabled:!!a||!C||e>0,children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"})," Reserve Local"]})]})]}),e>0&&!a&&C&&(0,r.jsxs)(n.Zp,{className:"md:col-span-2 lg:col-span-3",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{className:"font-headline",children:"Check-out"}),(0,r.jsx)(n.BT,{children:"Manage your group or leave the local."})]}),(0,r.jsxs)(n.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap gap-4",children:[(0,r.jsxs)(i.$,{variant:"outline",onClick:()=>{C&&g(C.username)},disabled:0===e,children:[(0,r.jsx)(h,{className:"mr-2 h-4 w-4"})," Check-out (Just Me)"]}),S&&(0,r.jsxs)(E.Lt,{children:[(0,r.jsx)(E.tv,{asChild:!0,children:(0,r.jsxs)(i.$,{variant:"destructive",children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Check-out My Group (",S.people," people)"]})}),(0,r.jsxs)(E.EO,{children:[(0,r.jsxs)(E.wd,{children:[(0,r.jsx)(E.r7,{children:"Check-out Entire Group?"}),(0,r.jsxs)(E.$v,{children:["This will check out all ",S.people," people that you registered under your name. Are you sure?"]})]}),(0,r.jsxs)(E.ck,{children:[(0,r.jsx)(E.Zr,{children:"Cancel"}),(0,r.jsx)(E.Rx,{onClick:()=>M(S),children:"Confirm Check-out"})]})]})]})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:S?"You are responsible for a group of ".concat(S.people,"."):"You are not responsible for any group."})]})]}),a&&(0,r.jsxs)(n.Zp,{className:"md:col-span-2 lg:col-span-3 bg-red-50 dark:bg-red-900/20 border-primary",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsxs)(n.ZB,{className:"font-headline text-primary flex items-center gap-2",children:[(0,r.jsx)(t.A,{})," Local Reserved"]}),(0,r.jsx)(n.BT,{className:"text-primary/80",children:"The association local is currently reserved. Check-out when finished."})]}),(0,r.jsxs)(n.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(m.A,{className:"h-5 w-5 text-primary flex-shrink-0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Reason"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:a.reason})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(p.A,{className:"h-5 w-5 text-primary flex-shrink-0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Contact Phone"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:a.contactPhone})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(u.A,{className:"h-5 w-5 text-primary flex-shrink-0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Estimated End Time"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Reserved at ".concat((0,R.GP)(new Date(a.reservedAt),"HH:mm")," - Ends around ").concat(a.endTime)})]})]})]}),(0,r.jsx)(i.$,{onClick:()=>{C&&N(C.username)},disabled:!C,className:"w-full sm:w-auto mt-4",children:"End Reservation (Check-out)"})]})]})]})}),(0,r.jsx)(k,{isOpen:w,onOpenChange:T}),(0,r.jsx)(A,{isOpen:P,onOpenChange:Z})]}):(0,r.jsx)("div",{className:"container mx-auto p-4 md:p-8 flex items-center justify-center min-h-[calc(100vh-theme(spacing.14))]",children:(0,r.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"})})}},8858:(e,s,a)=>{Promise.resolve().then(a.bind(a,7900))}},e=>{var s=s=>e(e.s=s);e.O(0,[87,908,112,258,441,684,358],()=>s(8858)),_N_E=e.O()}]);